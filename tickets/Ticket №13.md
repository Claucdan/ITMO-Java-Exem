# Парадигма аспектно-ориентированного программирования. Отличия от ООП.
## Аспектно-ориентированное программирование
### Определение 
**Аспектно-ориентированное программирование** (АОП) — это парадигма программирования являющейся дальнейшим развитием процедурного и объектно-ориентированного программирования (ООП). Идея АОП заключается в выделении так называемой сквозной функциональности
### Joint
Join point — это точки наблюдения, присоединения к коду, где планируется введение функциональности.
![Pasted image 20250610174942.png](../photos/Pasted%20image%2020250610174942.png)
### Pointcut
Pointcut — это срез, запрос точек присоединения, — это может быть одна и более точек. Правила запросов точек очень разнообразные, на рисунке выше, запрос по аннотации на методе и конкретный метод. Правила можно объединять по &&, ||,!
![Pasted image 20250610175018.png](../photos/Pasted%20image%2020250610175018.png)
### Advice
Advice — набор инструкций выполняемых на точках среза (Pointcut). Инструкции можно выполнять по событию разных типов:
- Before — перед вызовом метода
- After — после вызова метода
- After returning — после возврата значения из функции
- After throwing — в случае exception 
- After finally — в случае выполнения блока finally 
- Around — можно сделать пред., пост., обработку перед вызовом метода, а также вообще обойти вызов метода

На один Pointcut можно «повесить» несколько Advice разного типа.
![Pasted image 20250610175112.png](../photos/Pasted%20image%2020250610175112.png)
### Aspect
Aspect — модуль, в котором собраны описания Pointcut и Advice.
![Pasted image 20250610175143.png](../photos/Pasted%20image%2020250610175143.png)
### Proxy
1. JDK dynamic proxy - Spring AOP по умолчанию использует JDK dynamic proxy, которые позволяют проксировать любой интерфейс (или набор интерфейсов). Если целевой объект реализует хотя бы один интерфейс, то будет использоваться динамический прокси JDK.

2. CGLIB-прокси - используется по умолчанию, если бизнес-объект не реализует ни одного интерфейса.
![Pasted image 20250610175312.png](../photos/Pasted%20image%2020250610175312.png)
## Отличия от ООП
### Аспектно-ориентированное программирование (AOP)
**Цель**: Разделение сквозной функциональности (cross-cutting concerns), которая затрагивает несколько компонентов системы.  
**Примеры**: Логирование, транзакции, безопасность, кэширование.  

### Объектно-ориентированное программирование (ООП)
#### Цель
Организация кода через объекты, инкапсуляцию, наследование и полиморфизм.  
#### Примеры: 
Моделирование предметной области (классы `User`, `Order`).  

### Ключевые отличия

|                             | *АОП*                                            | *ООП*                           |
| --------------------------- | ------------------------------------------------ | ------------------------------- |
| **Основная единица**        | Аспект (Aspect)                                  | Класс (Class)                   |
| **Принцип работы**          | Внедрение кода в точки соединения (join points)  | Инкапсуляция данных и поведения |
| **Связность**               | Низкая (разделение сквозных задач)               | Высокая (логика внутри классов) |
| **Повторное использование** | Через аспекты (один аспект на несколько классов) | Через наследование и композицию |
| **Типичные применения**     | Логирование, транзакции, безопасность            | Бизнес-логика, модели данных    |

### Преимущества АОП перед ООП
- Уменьшение дублирования кода
- Без АОП:  
- Чистота бизнес-логики  
	- Классы не засоряются техническим кодом (логированием, транзакциями).
- Гибкость  
	- Можно включать/выключать аспекты без изменения основного кода.
### Недостатки АОП
- Сложность отладки
	- Поведение системы становится неочевидным (аспекты выполняются "за кулисами").  
- Оверхеад
	- Динамические прокси (в Spring AOP) могут снижать производительность.  
- Ухудшение читаемости
	- При чрезмерном использовании сложно отследить, какие аспекты где применяются.  